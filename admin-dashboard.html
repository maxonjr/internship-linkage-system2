<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard</title>
  <style>
    body {
      margin: 0;
      font-family: "Segoe UI", sans-serif;
      background-color: #f8f9fa;
    }
    
    #menuToggle {
      position: fixed;
      top: 10px;
      left: 10px;
      z-index: 1100;
      background-color: #003366;
      color: white;
      border: none;
      padding: 10px 14px;
      border-radius: 5px;
      cursor: pointer;
    }
    
    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      width: 220px;
      height: 100%;
      background-color: #003366;
      color: white;
      padding-top: 20px;
      z-index: 1000;
      transition: transform 0.3s ease;
    }
    
    .sidebar.collapsed {
      transform: translateX(-100%);
    }
    
    .sidebar.show {
      transform: translateX(0);
    }
    
    .sidebar h2 {
      text-align: center;
    }
    
    .sidebar button {
      display: block;
      width: 100%;
      background: none;
      border: none;
      color: white;
      padding: 12px;
      text-align: left;
      cursor: pointer;
    }
    
    .sidebar button:hover {
      background-color: #005599;
    }
    
    .content {
      margin-left: 220px;
      padding: 20px;
      transition: margin-left 0.3s ease;
    }
    
    .content.expanded {
      margin-left: 0;
    }
    
    .admin-profile {
      text-align: center;
      padding-bottom: 10px;
    }
    
    .admin-profile img {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      object-fit: cover;
      cursor: pointer;
      border: 2px solid white;
    }
    
    .admin-profile p {
      margin: 10px 0 0;
      font-weight: bold;
    }
    
    .dashboard-stats {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      flex-wrap: wrap;
      margin-top: 20px;
    }
    
    .stat-box {
      background-color: #e9f1f7;
      border-left: 5px solid #003366;
      padding: 20px;
      border-radius: 8px;
      width: 250px;
      min-width: 200px;
      text-align: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    
    .stat-box h3 {
      margin: 0;
      color: #003366;
    }
    
    .stat-box p {
      font-size: 24px;
      margin: 5px 0 0;
    }
    
    .dashboard {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-bottom: 20px;
    }
    
    .card {
      flex: 1 1 200px;
      background: #f1f1f1;
      padding: 15px;
      border-radius: 8px;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    
    th, td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: center;
    }
    
    th {
      background-color: #003366;
      color: white;
    }
    
    .btn {
      padding: 5px 10px;
      border: none;
      cursor: pointer;
      color: white;
      border-radius: 4px;
      margin: 2px;
    }
    
    .btn-edit { background-color: #ffc107; }
    .btn-delete { background-color: #dc3545; }
    .btn-view { background-color: #007bff; }
    .approve { background: #4CAF50; }
    .reject { background: #f44336; }
    .pending { background: #ff9800; }
    .submitted { background: #9C27B0; }
    
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
      z-index: 2000;
    }
    
    .modal-content {
      background: white;
      padding: 20px;
      border-radius: 8px;
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }
    
    .modal-close {
      float: right;
      cursor: pointer;
      font-size: 20px;
      color: red;
    }
    
    input[type="text"], input[type="email"], input[type="date"], input[type="tel"], select {
      padding: 8px;
      margin-bottom: 10px;
      width: 100%;
      border-radius: 4px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }
    
    button {
      padding: 8px 15px;
      background-color: #003366;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin-bottom: 15px;
    }
    
    button:hover {
      background-color: #005599;
    }
    
    .section {
      display: none;
    }
    
    .form-group {
      margin-bottom: 15px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }
    
    @media (max-width: 768px) {
      .sidebar {
        transform: translateX(-100%);
      }
      
      .sidebar.show {
        transform: translateX(0);
      }
      
      .content {
        margin-left: 0;
      }
      
      table {
        font-size: 14px;
      }
      
      th, td {
        padding: 5px;
      }
    }
  </style>
</head>
<body>

<button id="menuToggle">â˜°</button>

<div class="sidebar" id="sidebar">
  <div class="admin-profile">
    <label for="profileUpload">
      <img id="adminProfileImg" src="admin.jpg" alt="Admin" title="Click to change photo">
    </label>
    <input type="file" id="profileUpload" accept="image/*" style="display:none;">
    <p>Admin Name</p>
  </div>
  <button onclick="showSection('dashboard')"><h3>Dashboard</h3></button>
  <button onclick="showSection('companies')"><h3>Companies</h3></button>
  <button onclick="showSection('schools')"><h3>Schools</h3></button>
  <button onclick="showSection('trainees')"><h3>Trainees</h3></button>
  <button onclick="showSection('applications')"><h3>Applications Offer</h3></button>
  <button onclick="showSection('submittedInternships')"><h3>Submitted Internships</h3></button>
  <button onclick="confirmLogout()"><h3>Logout</h3></button>
</div>

<div class="modal" id="viewModal">
  <div class="modal-content">
    <span class="modal-close" onclick="closeModal()">&times;</span>
    <h2 id="modalTitle">Details</h2>
    <div id="modalDetails"></div>
  </div>
</div>

<div class="modal" id="formModal">
  <div class="modal-content">
    <span class="modal-close" onclick="closeFormModal()">&times;</span>
    <h2 id="formModalTitle">Add New</h2>
    <form id="entryForm">
      <div id="formFields"></div>
      <button type="button" onclick="submitForm()">Submit</button>
    </form>
  </div>
</div>

<div class="content" id="mainContent">
  <div id="dashboard" class="section">
    <h1>Dashboard</h1>
    <div class="dashboard-stats">
      <div class="stat-box">
        <h3>Total Companies</h3>
        <p id="total-companies">0</p>
      </div>
      <div class="stat-box">
        <h3>Total Schools</h3>
        <p id="total-schools">0</p>
      </div>
      <div class="stat-box">
        <h3>Total Trainees</h3>
        <p id="total-trainees">0</p>
      </div>
      <div class="stat-box">
        <h3>Total Internships</h3>
        <p id="total-internships">0</p>
      </div>
    </div>
    
    <div class="dashboard">
      <div class="card" id="totalApplications">Total Applications: 0</div>
      <div class="card" id="submittedApplications">Submitted Applications: 0</div>
      <div class="card" id="approvedApplications">Approved Applications: 0</div>
      <div class="card" id="rejectedApplications">Rejected Applications: 0</div>
      <div class="card" id="activeTrainees">Active Trainees: 0</div>
      <div class="card" id="inactiveTrainees">Inactive Trainees: 0</div>
      <div class="card" id="activeSchools">Active Schools: 0</div>
      <div class="card" id="inactiveSchools">Inactive Schools: 0</div>
      <div class="card" id="activeCompanies">Active Companies: 0</div>
      <div class="card" id="inactiveCompanies">Inactive Companies: 0</div>
      <div class="card" id="ongoingInternships">Ongoing Internships: 0</div>
      <div class="card" id="completedInternships">Completed Internships: 0</div>
    </div>
  </div>

  <div id="companies" class="section" style="display:none;">
    <h1>Companies</h1>
    <input type="text" placeholder="Search companies..." oninput="filterTable('company', this.value)">
    <button onclick="showFormModal('company')">+ Add Company</button>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Phone</th>
          <th>Industry</th>
          <th>Location</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="company-table"></tbody>
    </table>
  </div>

  <div id="schools" class="section" style="display:none;">
    <h1>Schools</h1>
    <input type="text" placeholder="Search schools..." oninput="filterTable('school', this.value)">
    <button onclick="showFormModal('school')">+ Add School</button>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Phone</th>
          <th>Type</th>
          <th>Location</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="school-table"></tbody>
    </table>
  </div>

  <div id="trainees" class="section" style="display:none;">
    <h1>Trainees</h1>
    <input type="text" placeholder="Search trainees..." oninput="filterTable('trainee', this.value)">
    <button onclick="showFormModal('trainee')">+ Add Trainee</button>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Phone</th>
          <th>School</th>
          <th>Program</th>
          <th>Year</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="trainee-table"></tbody>
    </table>
  </div>

  <div id="applications" class="section" style="display:none;">
    <h1>Internship Applications</h1>
    <p><h4>This is the internships offered by the company and the time it will take.</h4></p>
    <input type="text" placeholder="Search applications..." oninput="filterTable('application', this.value)">
    <button onclick="showFormModal('application')">+ New Application</button>
    <table>
      <thead>
        <tr>
          <th>Trainee</th>
          <th>Company</th>
          <th>Start Date</th>
          <th>Duration</th>
          <th>Position</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="application-table"></tbody>
    </table>
  </div>

  <div id="submittedInternships" class="section" style="display:none;">
    <h1>Submitted Internships</h1>
    <input type="text" placeholder="Search internships..." oninput="filterTable('internship', this.value)">
    <table>
      <thead>
        <tr>
          <th>Trainee</th>
          <th>School</th>
          <th>Company</th>
          <th>Position</th>
          <th>Start Date</th>
          <th>End Date</th>
          <th>Hours</th>
          <th>Supervisor</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="internship-table"></tbody>
    </table>
  </div>
</div>

<footer>@gmail</footer>

<script>
  // Data structures
  let companies = [];
  let schools = [];
  let trainees = [];
  let applications = [];
  let internships = [];
  let currentEditIndex = -1;
  let currentEditType = '';

  // Load data from localStorage
  function loadFromLocalStorage() {
    companies = JSON.parse(localStorage.getItem('companies')) || [];
    schools = JSON.parse(localStorage.getItem('schools')) || [];
    trainees = JSON.parse(localStorage.getItem('trainees')) || [];
    applications = JSON.parse(localStorage.getItem('applications')) || [];
    internships = JSON.parse(localStorage.getItem('internships')) || [];
  }

  // Save data to localStorage
  function saveToLocalStorage() {
    localStorage.setItem('companies', JSON.stringify(companies));
    localStorage.setItem('schools', JSON.stringify(schools));
    localStorage.setItem('trainees', JSON.stringify(trainees));
    localStorage.setItem('applications', JSON.stringify(applications));
    localStorage.setItem('internships', JSON.stringify(internships));
  }

  // Show/hide sections
  function showSection(id) {
    document.querySelectorAll('.section').forEach(s => s.style.display = 'none');
    document.getElementById(id).style.display = 'block';
  }

  // Navigation
  function confirmLogout() {
    if (confirm("Are you sure you want to logout?")) {
      alert("You have been logged out.");
    }
  }

  // Render all data
  function render() {
    // Update dashboard stats
    document.getElementById('total-companies').textContent = companies.length;
    document.getElementById('total-schools').textContent = schools.length;
    document.getElementById('total-trainees').textContent = trainees.length;
    document.getElementById('total-internships').textContent = internships.length;
    
    // Update card stats
    document.getElementById('totalApplications').textContent = `Total Applications: ${applications.length}`;
    document.getElementById('submittedApplications').textContent = `Submitted Applications: ${applications.filter(app => app.status === 'Submitted').length}`;
    document.getElementById('approvedApplications').textContent = `Approved Applications: ${applications.filter(app => app.status === 'Approved').length}`;
    document.getElementById('rejectedApplications').textContent = `Rejected Applications: ${applications.filter(app => app.status === 'Rejected').length}`;
    document.getElementById('activeTrainees').textContent = `Active Trainees: ${trainees.filter(t => t.active).length}`;
    document.getElementById('inactiveTrainees').textContent = `Inactive Trainees: ${trainees.filter(t => !t.active).length}`;
    document.getElementById('activeSchools').textContent = `Active Schools: ${schools.filter(s => s.active).length}`;
    document.getElementById('inactiveSchools').textContent = `Inactive Schools: ${schools.filter(s => !s.active).length}`;
    document.getElementById('activeCompanies').textContent = `Active Companies: ${companies.filter(c => c.active).length}`;
    document.getElementById('inactiveCompanies').textContent = `Inactive Companies: ${companies.filter(c => !c.active).length}`;
    document.getElementById('ongoingInternships').textContent = `Ongoing Internships: ${internships.filter(i => i.status === 'Ongoing').length}`;
    document.getElementById('completedInternships').textContent = `Completed Internships: ${internships.filter(i => i.status === 'Completed').length}`;
    
    // Render tables
    renderTable(companies, 'company-table', 'company');
    renderTable(schools, 'school-table', 'school');
    renderTable(trainees, 'trainee-table', 'trainee');
    renderTable(applications, 'application-table', 'application');
    renderTable(internships, 'internship-table', 'internship');
  }

  // Filter tables
  function filterTable(type, query) {
    query = query.toLowerCase();
    let filtered;
    
    switch(type) {
      case 'company':
        filtered = companies.filter(i => 
          i.name.toLowerCase().includes(query) || 
          i.email.toLowerCase().includes(query) ||
          i.phone.toLowerCase().includes(query) ||
          i.industry.toLowerCase().includes(query) ||
          i.location.toLowerCase().includes(query)
        );
        break;
      case 'school':
        filtered = schools.filter(i => 
          i.name.toLowerCase().includes(query) || 
          i.email.toLowerCase().includes(query) ||
          i.phone.toLowerCase().includes(query) ||
          i.type.toLowerCase().includes(query) ||
          i.location.toLowerCase().includes(query)
        );
        break;
      case 'trainee':
        filtered = trainees.filter(i => 
          i.name.toLowerCase().includes(query) || 
          i.email.toLowerCase().includes(query) ||
          i.phone.toLowerCase().includes(query) ||
          i.school.toLowerCase().includes(query) ||
          i.program.toLowerCase().includes(query)
        );
        break;
      case 'application':
        filtered = applications.filter(i => 
          i.trainee.toLowerCase().includes(query) || 
          i.company.toLowerCase().includes(query) ||
          i.position.toLowerCase().includes(query) ||
          i.duration.toLowerCase().includes(query)
        );
        break;
      case 'internship':
        filtered = internships.filter(i => 
          i.trainee.toLowerCase().includes(query) || 
          i.company.toLowerCase().includes(query) ||
          i.school.toLowerCase().includes(query) ||
          i.position.toLowerCase().includes(query) ||
          i.supervisor.toLowerCase().includes(query)
        );
        break;
    }
    
    renderTable(filtered, `${type}-table`, type);
  }

  // Render tables
  function renderTable(data, elementId, type) {
    const tbody = document.getElementById(elementId);
    tbody.innerHTML = '';
    
    if (data.length === 0) {
      const row = document.createElement('tr');
      const colCount = document.querySelector(`#${elementId.replace('-table', '')} thead tr`).childElementCount;
      row.innerHTML = `<td colspan="${colCount}" style="text-align:center;">No data available</td>`;
      tbody.appendChild(row);
      return;
    }
    
    data.forEach((item, index) => {
      const row = document.createElement('tr');
      
      // Common fields for all types
      let rowContent = '';
      
      switch(type) {
        case 'company':
          rowContent = `
            <td>${item.name}</td>
            <td>${item.email}</td>
            <td>${item.phone}</td>
            <td>${item.industry}</td>
            <td>${item.location}</td>
            <td>
              <button class="btn ${item.active ? 'approve' : 'reject'}" 
                      onclick="toggleStatus('${type}', ${index})">
                ${item.active ? 'Active' : 'Inactive'}
              </button>
            </td>
          `;
          break;
          
        case 'school':
          rowContent = `
            <td>${item.name}</td>
            <td>${item.email}</td>
            <td>${item.phone}</td>
            <td>${item.type}</td>
            <td>${item.location}</td>
            <td>
              <button class="btn ${item.active ? 'approve' : 'reject'}" 
                      onclick="toggleStatus('${type}', ${index})">
                ${item.active ? 'Active' : 'Inactive'}
              </button>
            </td>
          `;
          break;
          
        case 'trainee':
          rowContent = `
            <td>${item.name}</td>
            <td>${item.email}</td>
            <td>${item.phone}</td>
            <td>${item.school}</td>
            <td>${item.program}</td>
            <td>${item.year}</td>
            <td>
              <button class="btn ${item.active ? 'approve' : 'reject'}" 
                      onclick="toggleStatus('${type}', ${index})">
                ${item.active ? 'Active' : 'Inactive'}
              </button>
            </td>
          `;
          break;
          
        case 'application':
          rowContent = `
            <td>${item.trainee}</td>
            <td>${item.company}</td>
            <td>${item.startDate}</td>
            <td>${item.duration}</td>
            <td>${item.position}</td>
            <td>
              <button class="btn ${item.status.toLowerCase()}" 
                      onclick="toggleApplicationStatus(${index})">
                ${item.status}
              </button>
            </td>
          `;
          break;
          
        case 'internship':
          rowContent = `
            <td>${item.trainee}</td>
            <td>${item.school}</td>
            <td>${item.company}</td>
            <td>${item.position}</td>
            <td>${item.startDate}</td>
            <td>${item.endDate}</td>
            <td>${item.hours}</td>
            <td>${item.supervisor}</td>
            <td>
              <button class="btn ${item.status.toLowerCase()}" 
                      onclick="toggleInternshipStatus(${index})">
                ${item.status}
              </button>
            </td>
          `;<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Portal | InternshipCenter</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <style>
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
            text-align: center;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin: 10px 0;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9rem;
        }
        
        .admin-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .admin-table th, .admin-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        .admin-table th {
            background-color: #f5f5f5;
            font-weight: 600;
        }
        
        .status-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .status-active {
            background-color: #d4edda;
            color: #155724;
        }
        
        .status-inactive {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .action-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            margin-right: 5px;
        }
        
        .edit-btn {
            background-color: #fff3cd;
            color: #856404;
        }
        
        .delete-btn {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .toggle-btn {
            background-color: #d1ecf1;
            color: #0c5460;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1 class="logo">InternshipCenter</h1>
            <nav>
                <div class="profile-dropdown">
                    <img src="images/admin.jpg" alt="Admin" class="profile-img">
                    <div class="dropdown-content">
                        <a href="admin.html">Dashboard</a>
                        <a href="#">Settings</a>
                        <a href="#" id="adminLogoutBtn">Logout</a>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <div class="dashboard-container">
        <aside class="sidebar">
            <div class="profile-summary">
                <img src="images/admin.jpg" alt="Admin" class="profile-large">
                <h3>Admin</h3>
                <p>admin@internshipcenter.com</p>
            </div>
            <nav class="dashboard-nav">
                <a href="#dashboard" class="active">Dashboard</a>
                <a href="#applicants">Applicants</a>
                <a href="#internships">Internships</a>
                <a href="#companies">Companies</a>
                <a href="#schools">Schools</a>
            </nav>
        </aside>

        <main class="dashboard-content">
            <section id="dashboard" class="dashboard-section active">
                <h2>Admin Dashboard</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="totalApplicants">124</div>
                        <div class="stat-label">Total Applicants</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="activeCompanies">18</div>
                        <div class="stat-label">Active Companies</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="internshipPosts">26</div>
                        <div class="stat-label">Internship Posts</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="pendingApps">14</div>
                        <div class="stat-label">Pending Applications</div>
                    </div>
                </div>
                
                <h3>Recent Applications</h3>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Internship</th>
                            <th>Company</th>
                            <th>Date</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="recentApplications">
                        <!-- Will be populated by JS -->
                    </tbody>
                </table>
            </section>

            <section id="applicants" class="dashboard-section">
                <h2>Manage Applicants</h2>
                <div class="filters">
                    <select id="applicantFilter">
                        <option value="all">All Applicants</option>
                        <option value="pending">Pending</option>
                        <option value="accepted">Accepted</option>
                        <option value="rejected">Rejected</option>
                    </select>
                    <input type="text" id="applicantSearch" placeholder="Search applicants...">
                </div>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Applications</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="applicantsTable">
                        <!-- Will be populated by JS -->
                    </tbody>
                </table>
            </section>

            <section id="internships" class="dashboard-section">
                <h2>Manage Internships</h2>
                <button class="btn-primary" id="addInternshipBtn">Add New Internship</button>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>Title</th>
                            <th>Company</th>
                            <th>Location</th>
                            <th>Duration</th>
                            <th>Applications</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="internshipsTable">
                        <!-- Will be populated by JS -->
                    </tbody>
                </table>
            </section>
        </main>
    </div>

    <script src="js/auth.js"></script>
    <script src="js/admin.js"></script>
</body>
</html>
          break;
      }
      
      // Add action buttons
      rowContent += `
        <td>
          <button class="btn btn-view" onclick="viewItem('${type}', ${index})">View</button>
          <button class="btn btn-edit" onclick="editItem('${type}', ${index})">Edit</button>
          <button class="btn btn-delete" onclick="deleteItem('${type}', ${index})">Delete</button>
          ${type === 'internship' ? `
            <button class="btn ${item.status === 'Approved' ? 'reject' : 'approve'}" 
                    onclick="${item.status === 'Approved' ? 'rejectInternship' : 'approveInternship'}(${index})">
              ${item.status === 'Approved' ? 'Reject' : 'Approve'}
            </button>
          ` : ''}
        </td>
      `;
      
      row.innerHTML = rowContent;
      tbody.appendChild(row);
    });
  }

  // Toggle status
  function toggleStatus(type, index) {
    let data;
    switch(type) {
      case 'company': data = companies; break;
      case 'school': data = schools; break;
      case 'trainee': data = trainees; break;
    }
    
    data[index].active = !data[index].active;
    saveToLocalStorage();
    render();
  }

  // Toggle application status
  function toggleApplicationStatus(index) {
    const statusOrder = ['Pending', 'Submitted', 'Approved', 'Rejected'];
    const currentStatus = applications[index].status;
    const currentIndex = statusOrder.indexOf(currentStatus);
    const nextIndex = (currentIndex + 1) % statusOrder.length;
    
    applications[index].status = statusOrder[nextIndex];
    
    // If approved, create an internship record
    if (statusOrder[nextIndex] === 'Approved') {
      const app = applications[index];
      const trainee = trainees.find(t => t.name === app.trainee);
      const company = companies.find(c => c.name === app.company);
      
      if (trainee && company) {
        internships.push({
          trainee: app.trainee,
          school: trainee.school,
          company: app.company,
          position: app.position,
          startDate: app.startDate,
          endDate: calculateEndDate(app.startDate, app.duration),
          hours: '160', // Default hours
          supervisor: company.name + ' Manager',
          status: 'Pending'
        });
      }
    }
    
    saveToLocalStorage();
    render();
  }

  // Calculate end date based on start date and duration
  function calculateEndDate(startDate, duration) {
    if (!startDate) return 'N/A';
    
    const durationParts = duration.split(' ');
    const amount = parseInt(durationParts[0]);
    const unit = durationParts[1] || 'weeks';
    
    const date = new Date(startDate);
    
    switch(unit.toLowerCase()) {
      case 'weeks': date.setDate(date.getDate() + (amount * 7)); break;
      case 'months': date.setMonth(date.getMonth() + amount); break;
      default: date.setDate(date.getDate() + (amount * 7)); // Default to weeks
    }
    
    return date.toISOString().split('T')[0];
  }

  // Toggle internship status
  function toggleInternshipStatus(index) {
    const statusOrder = ['Pending', 'Ongoing', 'Completed'];
    const currentStatus = internships[index].status;
    const currentIndex = statusOrder.indexOf(currentStatus);
    const nextIndex = (currentIndex + 1) % statusOrder.length;
    
    internships[index].status = statusOrder[nextIndex];
    saveToLocalStorage();
    render();
  }

  // Approve internship
  function approveInternship(index) {
    internships[index].status = 'Approved';
    saveToLocalStorage();
    render();
  }

  // Reject internship
  function rejectInternship(index) {
    internships[index].status = 'Rejected';
    saveToLocalStorage();
    render();
  }

  // Show form modal for adding/editing
  function showFormModal(type, index = -1) {
    currentEditType = type;
    currentEditIndex = index;
    
    const modal = document.getElementById('formModal');
    const title = document.getElementById('formModalTitle');
    const formFields = document.getElementById('formFields');
    
    title.textContent = index === -1 ? `Add New ${type.charAt(0).toUpperCase() + type.slice(1)}` : 
                                     `Edit ${type.charAt(0).toUpperCase() + type.slice(1)}`;
    
    formFields.innerHTML = '';
    
    let fields = [];
    let item = {};
    
    if (index !== -1) {
      switch(type) {
        case 'company': item = companies[index]; break;
        case 'school': item = schools[index]; break;
        case 'trainee': item = trainees[index]; break;
        case 'application': item = applications[index]; break;
      }
    }
    
    switch(type) {
      case 'company':
        fields = [
          { label: 'Company Name', name: 'name', type: 'text', value: item.name || '', required: true },
          { label: 'Email', name: 'email', type: 'email', value: item.email || '', required: true },
          { label: 'Phone', name: 'phone', type: 'tel', value: item.phone || '', required: true },
          { label: 'Industry', name: 'industry', type: 'text', value: item.industry || '', required: true },
          { label: 'Location', name: 'location', type: 'text', value: item.location || '', required: true },
          { label: 'Active', name: 'active', type: 'checkbox', checked: item.active !== false }
        ];
        break;
        
      case 'school':
        fields = [
          { label: 'School Name', name: 'name', type: 'text', value: item.name || '', required: true },
          { label: 'Email', name: 'email', type: 'email', value: item.email || '', required: true },
          { label: 'Phone', name: 'phone', type: 'tel', value: item.phone || '', required: true },
          { label: 'School Type', name: 'type', type: 'text', value: item.type || '', required: true },
          { label: 'Location', name: 'location', type: 'text', value: item.location || '', required: true },
          { label: 'Active', name: 'active', type: 'checkbox', checked: item.active !== false }
        ];
        break;
        
      case 'trainee':
        fields = [
          { label: 'Full Name', name: 'name', type: 'text', value: item.name || '', required: true },
          { label: 'Email', name: 'email', type: 'email', value: item.email || '', required: true },
          { label: 'Phone', name: 'phone', type: 'tel', value: item.phone || '', required: true },
          { label: 'School', name: 'school', type: 'text', value: item.school || '', required: true },
          { label: 'Program', name: 'program', type: 'text', value: item.program || '', required: true },
          { label: 'Year', name: 'year', type: 'text', value: item.year || '', required: true },
          { label: 'Active', name: 'active', type: 'checkbox', checked: item.active !== false }
        ];
        break;
        
      case 'application':
        const traineeOptions = trainees.map(t => `<option value="${t.name}">${t.name}</option>`).join('');
        const companyOptions = companies.map(c => `<option value="${c.name}">${c.name}</option>`).join('');
        
        fields = [
          { 
            label: 'Trainee', 
            name: 'trainee', 
            type: 'select', 
            options: traineeOptions, 
            selected: item.trainee || '', 
            required: true 
          },
          { 
            label: 'Company', 
            name: 'company', 
            type: 'select', 
            options: companyOptions, 
            selected: item.company || '', 
            required: true 
          },
          { label: 'Start Date', name: 'startDate', type: 'date', value: item.startDate || '', required: true },
          { 
            label: 'Duration', 
            name: 'duration', 
            type: 'select', 
            options: `
              <option value="4 weeks" ${item.duration === '4 weeks' ? 'selected' : ''}>4 weeks</option>
              <option value="8 weeks" ${item.duration === '8 weeks' ? 'selected' : ''}>8 weeks</option>
              <option value="12 weeks" ${item.duration === '12 weeks' ? 'selected' : ''}>12 weeks</option>
              <option value="6 months" ${item.duration === '6 months' ? 'selected' : ''}>6 months</option>
            `, 
            selected: item.duration || '8 weeks', 
            required: true 
          },
          { label: 'Position', name: 'position', type: 'text', value: item.position || '', required: true },
          { 
            label: 'Status', 
            name: 'status', 
            type: 'select', 
            options: `
              <option value="Pending" ${item.status === 'Pending' ? 'selected' : ''}>Pending</option>
              <option value="Submitted" ${item.status === 'Submitted' ? 'selected' : ''}>Submitted</option>
              <option value="Approved" ${item.status === 'Approved' ? 'selected' : ''}>Approved</option>
              <option value="Rejected" ${item.status === 'Rejected' ? 'selected' : ''}>Rejected</option>
            `, 
            selected: item.status || 'Pending', 
            required: true 
          }
        ];
        break;
    }
    
    // Generate form fields
    fields.forEach(field => {
      const group = document.createElement('div');
      group.className = 'form-group';
      
      const label = document.createElement('label');
      label.textContent = field.label;
      label.htmlFor = field.name;
      
      let input;
      
      if (field.type === 'select') {
        input = document.createElement('select');
        input.id = field.name;
        input.name = field.name;
        input.innerHTML = field.options;
        if (field.required) input.required = true;
      } 
      else if (field.type === 'checkbox') {
        input = document.createElement('input');
        input.type = 'checkbox';
        input.id = field.name;
        input.name = field.name;
        if (field.checked) input.checked = true;
      }
      else {
        input = document.createElement('input');
        input.type = field.type;
        input.id = field.name;
        input.name = field.name;
        input.value = field.value;
        if (field.required) input.required = true;
      }
      
      group.appendChild(label);
      group.appendChild(input);
      formFields.appendChild(group);
    });
    
    modal.style.display = 'flex';
  }

  // Close form modal
  function closeFormModal() {
    document.getElementById('formModal').style.display = 'none';
  }

  // Submit form
  function submitForm() {
    const form = document.getElementById('entryForm');
    const inputs = form.querySelectorAll('input, select');
    const data = {};
    
    inputs.forEach(input => {
      if (input.type === 'checkbox') {
        data[input.name] = input.checked;
      } else {
        data[input.name] = input.value;
      }
    });
    
    if (currentEditIndex === -1) {
      // Add new item
      switch(currentEditType) {
        case 'company': companies.push(data); break;
        case 'school': schools.push(data); break;
        case 'trainee': trainees.push(data); break;
        case 'application': applications.push(data); break;
      }
    } else {
      // Edit existing item
      switch(currentEditType) {
        case 'company': companies[currentEditIndex] = data; break;
        case 'school': schools[currentEditIndex] = data; break;
        case 'trainee': trainees[currentEditIndex] = data; break;
        case 'application': applications[currentEditIndex] = data; break;
      }
    }
    
    saveToLocalStorage();
    render();
    closeFormModal();
  }

  // View item details
  function viewItem(type, index) {
    let item;
    switch(type) {
      case 'company': item = companies[index]; break;
      case 'school': item = schools[index]; break;
      case 'trainee': item = trainees[index]; break;
      case 'application': item = applications[index]; break;
      case 'internship': item = internships[index]; break;
    }
    
    let details = '';
    
    for (const key in item) {
      if (item.hasOwnProperty(key)) {
        details += `<p><strong>${key.charAt(0).toUpperCase() + key.slice(1)}:</strong> ${item[key]}</p>`;
      }
    }
    
    document.getElementById('modalTitle').textContent = `Viewing ${type}`;
    document.getElementById('modalDetails').innerHTML = details;
    document.getElementById('viewModal').style.display = 'flex';
  }

  // Edit item
  function editItem(type, index) {
    showFormModal(type, index);
  }

  // Delete item
  function deleteItem(type, index) {
    if (!confirm("Are you sure you want to delete this entry?")) return;
    
    switch(type) {
      case 'company': companies.splice(index, 1); break;
      case 'school': schools.splice(index, 1); break;
      case 'trainee': trainees.splice(index, 1); break;
      case 'application': applications.splice(index, 1); break;
      case 'internship': internships.splice(index, 1); break;
    }
    
    saveToLocalStorage();
    render();
  }

  // Close modal
  function closeModal() {
    document.getElementById('viewModal').style.display = 'none';
  }

  // Event Listeners
  document.getElementById("profileUpload").addEventListener("change", function(event) {
    const file = event.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function(e) {
        const imgData = e.target.result;
        localStorage.setItem("adminProfileImage", imgData);
        document.getElementById("adminProfileImg").src = imgData;
      };
      reader.readAsDataURL(file);
    }
  });

  document.getElementById("menuToggle").addEventListener("click", function() {
    const sidebar = document.getElementById("sidebar");
    const content = document.getElementById("mainContent");

    sidebar.classList.toggle("collapsed");
    content.classList.toggle("expanded");

    if (window.innerWidth <= 768) {
      sidebar.classList.toggle("show");
    }
  });

  // Initialize
  window.addEventListener('load', function() {
    loadFromLocalStorage();
    
    // Add sample data if empty
    if (companies.length === 0) {
      companies = [
        { name: "Tech Corp", email: "info@techcorp.com", phone: "1234567890", industry: "Technology", location: "New York", active: true },
        { name: "Edu Solutions", email: "contact@edusolutions.com", phone: "9876543210", industry: "Education", location: "Boston", active: true }
      ];
    }
    
    if (schools.length === 0) {
      schools = [
        { name: "City University", email: "admin@cityuni.edu", phone: "5551234567", type: "University", location: "Chicago", active: true },
        { name: "State College", email: "info@statecollege.edu", phone: "5559876543", type: "College", location: "Los Angeles", active: true }
      ];
    }
    
    if (trainees.length === 0) {
      trainees = [
        { name: "John Doe", email: "john@example.com", phone: "1112223333", school: "City University", program: "Computer Science", year: "3", active: true },
        { name: "Jane Smith", email: "jane@example.com", phone: "4445556666", school: "State College", program: "Business", year: "2", active: true }
      ];
    }
    
    if (applications.length === 0) {
      applications = [
        { trainee: "John Doe", company: "Tech Corp", startDate: "2023-06-01", duration: "8 weeks", position: "Software Developer", status: "Pending" },
        { trainee: "Jane Smith", company: "Edu Solutions", startDate: "2023-07-01", duration: "12 weeks", position: "Marketing Intern", status: "Submitted" }
      ];
    }
    
    if (internships.length === 0) {
      internships = [
        { trainee: "John Doe", school: "City University", company: "Tech Corp", position: "Software Developer", 
          startDate: "2023-06-01", endDate: "2023-07-27", hours: "160", supervisor: "Tech Corp Manager", status: "Pending" }
      ];
    }
    
    saveToLocalStorage();
    render();
    
    const savedImg = localStorage.getItem("adminProfileImage");
    if (savedImg) {
      document.getElementById("adminProfileImg").src = savedImg;
    }
    
    // Show dashboard by default
    showSection('dashboard');
  });
</script>
</body>
</html>






  // Initialize data structures with proper localStorage handling
  let companies = JSON.parse(localStorage.getItem('companies')) || [];
  let schools = JSON.parse(localStorage.getItem('schools')) || [];
  let trainees = JSON.parse(localStorage.getItem('trainees')) || [];
  let applications = JSON.parse(localStorage.getItem('applications')) || [];
  let internships = JSON.parse(localStorage.getItem('internships')) || [];
  
  let currentEditIndex = -1;
  let currentEditType = '';

  // Save all data to localStorage
  function saveAllData() {
    localStorage.setItem('companies', JSON.stringify(companies));
    localStorage.setItem('schools', JSON.stringify(schools));
    localStorage.setItem('trainees', JSON.stringify(trainees));
    localStorage.setItem('applications', JSON.stringify(applications));
    localStorage.setItem('internships', JSON.stringify(internships));
  }

  // Initialize sample data only if localStorage is empty
  function initializeSampleData() {
    if (companies.length === 0) {
      companies = [
        { 
          name: "Tech Corp", 
          email: "info@techcorp.com", 
          phone: "1234567890", 
          industry: "Technology", 
          location: "New York", 
          active: true 
        }
      ];
    }
    
    if (schools.length === 0) {
      schools = [
        { 
          name: "City University", 
          email: "admin@cityuni.edu", 
          phone: "5551234567", 
          type: "University", 
          location: "Chicago", 
          active: true 
        }
      ];
    }
    
    if (trainees.length === 0) {
      trainees = [
        { 
          name: "John Doe", 
          email: "john@example.com", 
          phone: "1112223333", 
          school: "City University", 
          program: "Computer Science", 
          year: "3", 
          active: true 
        }
      ];
    }
    
    if (applications.length === 0) {
      applications = [
        { 
          trainee: "John Doe", 
          company: "Tech Corp", 
          startDate: "2023-06-01", 
          duration: "8 weeks", 
          position: "Software Developer", 
          status: "Pending" 
        }
      ];
    }
    
    if (internships.length === 0) {
      internships = [
        { 
          trainee: "John Doe", 
          school: "City University", 
          company: "Tech Corp", 
          position: "Software Developer", 
          startDate: "2023-06-01", 
          endDate: "2023-07-27", 
          hours: "160", 
          supervisor: "Tech Corp Manager", 
          status: "Pending" 
        }
      ];
    }
    
    saveAllData();
  }

  // Modified addEntry function to properly save data
  function addEntry(type) {
    const name = prompt(`Enter ${type} name:`);
    if (!name) return;
    
    const email = prompt(`Enter ${type} email:`);
    if (!email) return;

    const newEntry = { 
      name, 
      email, 
      active: true // Default to active
    };

    // Add additional fields based on type
    switch(type) {
      case 'company':
        newEntry.phone = prompt("Enter phone number:") || '';
        newEntry.industry = prompt("Enter industry:") || '';
        newEntry.location = prompt("Enter location:") || '';
        companies.push(newEntry);
        break;
      case 'school':
        newEntry.phone = prompt("Enter phone number:") || '';
        newEntry.type = prompt("Enter school type:") || '';
        newEntry.location = prompt("Enter location:") || '';
        schools.push(newEntry);
        break;
      case 'trainee':
        newEntry.phone = prompt("Enter phone number:") || '';
        newEntry.school = prompt("Enter school:") || '';
        newEntry.program = prompt("Enter program:") || '';
        newEntry.year = prompt("Enter year:") || '';
        trainees.push(newEntry);
        break;
    }

    saveAllData();
    render();
  }

  // Modified addApplication function to properly save data
  function addApplication() {
    if (trainees.length === 0 || companies.length === 0) {
      alert("Add at least one trainee and one company first.");
      return;
    }
    
    const trainee = prompt("Enter trainee name:");
    if (!trainee) return;
    
    const company = prompt("Enter company name:");
    if (!company) return;
    
    const newApp = { 
      trainee, 
      company, 
      startDate: prompt("Enter start date (YYYY-MM-DD):") || '',
      duration: prompt("Enter duration (e.g., '8 weeks'):") || '8 weeks',
      position: prompt("Enter position:") || '',
      status: 'Pending' 
    };
    
    applications.push(newApp);
    saveAllData();
    render();
  }

  // Modified toggle functions to save data
  function toggleStatus(type, index) {
    let data;
    switch(type) {
      case 'company': data = companies; break;
      case 'school': data = schools; break;
      case 'trainee': data = trainees; break;
    }
    
    data[index].active = !data[index].active;
    saveAllData();
    render();
  }

  function toggleApplicationStatus(index) {
    const statusOrder = ['Pending', 'Submitted', 'Approved', 'Rejected'];
    const currentStatus = applications[index].status;
    const currentIndex = statusOrder.indexOf(currentStatus);
    const nextIndex = (currentIndex + 1) % statusOrder.length;
    
    applications[index].status = statusOrder[nextIndex];
    
    // If approved, create an internship record
    if (statusOrder[nextIndex] === 'Approved') {
      const app = applications[index];
      const trainee = trainees.find(t => t.name === app.trainee);
      const company = companies.find(c => c.name === app.company);
      
      if (trainee && company) {
        internships.push({
          trainee: app.trainee,
          school: trainee.school,
          company: app.company,
          position: app.position,
          startDate: app.startDate,
          endDate: calculateEndDate(app.startDate, app.duration),
          hours: '160',
          supervisor: company.name + ' Manager',
          status: 'Pending'
        });
      }
    }
    
    saveAllData();
    render();
  }

  // All other functions remain the same but ensure they call saveAllData() after modifications

  // Initialize on load
  window.addEventListener('load', function() {
    initializeSampleData();
    render();
    
    const savedImg = localStorage.getItem("adminProfileImage");
    if (savedImg) {
      document.getElementById("adminProfileImg").src = savedImg;
    }
    
    // Show dashboard by default
    showSection('dashboard');
  });

  // Make sure all functions that modify data call saveAllData()
  // For example:
  function deleteItem(type, index) {
    if (!confirm("Are you sure you want to delete this entry?")) return;
    
    switch(type) {
      case 'company': companies.splice(index, 1); break;
      case 'school': schools.splice(index, 1); break;
      case 'trainee': trainees.splice(index, 1); break;
      case 'application': applications.splice(index, 1); break;
      case 'internship': internships.splice(index, 1); break;
    }
    
    saveAllData();
    render();
  }

  // Ensure all other data modification functions follow the same pattern